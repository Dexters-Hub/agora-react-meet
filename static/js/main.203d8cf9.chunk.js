(this["webpackJsonpagora-react-demo"]=this["webpackJsonpagora-react-demo"]||[]).push([[0],{22:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(16),o=n.n(a),i=(n(22),n(8)),u=n(2),s=n.n(u),d=n(17),l=n(6),b=n(4),f=n(7),j=n(1);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/agora-react-meet",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APP_ID:"7d492cbfe8d74f4fb9455d2c49185059",REACT_APP_TOKEN:"0067d492cbfe8d74f4fb9455d2c49185059IADYXTLxer/t4ISiIUnVECYuRl4f04FxUomNen2du5GQJieb6T8AAAAAEAAAdVB9tKcjYQEAAQC0pyNh"}).APP_ID);var v="".concat("7d492cbfe8d74f4fb9455d2c49185059"),p="".concat("0067d492cbfe8d74f4fb9455d2c49185059IADYXTLxer/t4ISiIUnVECYuRl4f04FxUomNen2du5GQJieb6T8AAAAAEAAAdVB9tKcjYQEAAQC0pyNh"),O=Object(f.b)({mode:"rtc",codec:"vp8"}),h=Object(f.c)(),x=function(e){var t=e.setInCall,n=e.channelName,r=Object(c.useState)([]),a=Object(b.a)(r,2),o=a[0],i=a[1],u=Object(c.useState)(!1),f=Object(b.a)(u,2),x=f[0],C=f[1],k=O(),g=h(),T=g.ready,E=g.tracks;return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.on("user-published",function(){var e=Object(l.a)(s.a.mark((function e(t,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.subscribe(t,n);case 2:console.log("subscribe success"),"video"===n&&i((function(e){return[].concat(Object(d.a)(e),[t])})),"audio"===n&&(null===(c=t.audioTrack)||void 0===c||c.play());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k.on("user-unpublished",(function(e,t){var n;(console.log("unpublished",e,t),"audio"===t)&&(null===(n=e.audioTrack)||void 0===n||n.stop());"video"===t&&i((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),k.on("user-left",(function(e){console.log("leaving",e),i((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.next=5,k.join(v,t,p,null);case 5:if(!E){e.next=8;break}return e.next=8,k.publish([E[0],E[1]]);case 8:C(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();T&&E&&(console.log("init ready"),e(n))}),[n,k,T,E]),Object(j.jsxs)("div",{className:"App",children:[T&&E&&Object(j.jsx)(m,{tracks:E,setStart:C,setInCall:t}),x&&E&&Object(j.jsx)(A,{users:o,tracks:E})]})},A=function(e){var t=e.users,n=e.tracks;return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{id:"videos",children:[Object(j.jsx)(f.a,{className:"vid",videoTrack:n[1]}),t.length>0&&t.map((function(e){return e.videoTrack?Object(j.jsx)(f.a,{className:"vid",videoTrack:e.videoTrack},e.uid):null}))]})})},m=function(e){var t=O(),n=e.tracks,r=e.setStart,a=e.setInCall,o=Object(c.useState)({video:!0,audio:!0}),u=Object(b.a)(o,2),d=u[0],f=u[1],v=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,n[0].setEnabled(!d.audio);case 3:f((function(e){return Object(i.a)(Object(i.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,n[1].setEnabled(!d.video);case 9:f((function(e){return Object(i.a)(Object(i.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leave();case 2:t.removeAllListeners(),n[0].close(),n[1].close(),r(!1),a(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"controls",children:[Object(j.jsx)("p",{className:d.audio?"on":"",onClick:function(){return v("audio")},children:d.audio?"MuteAudio":"UnmuteAudio"}),Object(j.jsx)("p",{className:d.video?"on":"",onClick:function(){return v("video")},children:d.video?"MuteVideo":"UnmuteVideo"}),Object(j.jsx)("p",{onClick:function(){return p()},children:"Leave"})]})},C=function(e){var t=e.setInCall,n=e.setChannelName;return Object(j.jsxs)("form",{className:"join",children:[""===v&&Object(j.jsx)("p",{style:{color:"red"},children:"Please enter your Agora App ID in App.tsx and refresh the page"}),Object(j.jsx)("input",{type:"text",placeholder:"Enter Channel Name",onChange:function(e){return n(e.target.value)}}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),t(!0)},children:"Join"})]})},k=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(b.a)(a,2),i=o[0],u=o[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"heading",children:"Agora Video Meet"}),n?Object(j.jsx)(x,{setInCall:r,channelName:i}):Object(j.jsx)(C,{setInCall:r,setChannelName:u})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root")),g()}},[[47,1,2]]]);
//# sourceMappingURL=main.203d8cf9.chunk.js.map